# 环境变量检查清单

## 🔧 **必需的环境变量**

### **数据库配置**
```bash
# PostgreSQL 数据库连接
DATABASE_URL="postgresql://username:password@localhost:5432/database_name"

# 示例：
DATABASE_URL="postgresql://postgres:password@localhost:5432/aijiayuan"
```

### **JWT 配置**
```bash
# JWT 密钥（用于用户认证）
JWT_SECRET="your-super-secret-jwt-key-change-in-production"

# 示例：
JWT_SECRET="aijiayuan-jwt-secret-key-2024"
```

### **其他配置**
```bash
# 应用环境
NODE_ENV="development"  # 或 "production"

# 端口配置
PORT=3000
```

## 🔍 **检查步骤**

### **1. 检查 .env.local 文件**
确保项目根目录有 `.env.local` 文件，包含以上环境变量。

### **2. 验证数据库连接**
```bash
# 测试数据库连接
npx prisma db push
```

### **3. 检查数据库服务**
确保 PostgreSQL 服务正在运行：
```bash
# 检查 PostgreSQL 状态
sudo systemctl status postgresql

# 或启动服务
sudo systemctl start postgresql
```

## 🚨 **常见问题**

### **问题1：DATABASE_URL 格式错误**
```
❌ 错误格式：mysql://user:pass@localhost/db
✅ 正确格式：postgresql://user:pass@localhost:5432/db
```

### **问题2：数据库不存在**
```bash
# 创建数据库
createdb aijiayuan
```

### **问题3：权限问题**
```bash
# 检查用户权限
psql -U postgres -c "\du"
```

## 🔧 **快速修复**

### **1. 重新生成 Prisma 客户端**
```bash
npx prisma generate
```

### **2. 重置数据库**
```bash
npx prisma db push --force-reset
```

### **3. 检查 Prisma 模式**
确保 `prisma/schema.prisma` 文件存在且正确。
