# ç”Ÿäº§ç¯å¢ƒæ£€æŸ¥æŠ¥å‘Š

**æ£€æŸ¥æ—¶é—´**: 2025-10-04 08:59 UTC
**ç”Ÿäº§ç¯å¢ƒ**: https://aijiayuan.top/
**éƒ¨ç½²å¹³å°**: Zeabur

## æ‰§è¡Œæ‘˜è¦ âœ…

ç”Ÿäº§ç¯å¢ƒæ•´ä½“è¿è¡ŒçŠ¶æ€**å¥åº·**,æ‰€æœ‰æ ¸å¿ƒæœåŠ¡å’ŒåŠŸèƒ½æ­£å¸¸ã€‚

## è¯¦ç»†æ£€æŸ¥ç»“æœ

### 1. åŸºç¡€è®¾æ–½ âœ…

#### æœåŠ¡å™¨çŠ¶æ€
- **çŠ¶æ€**: æ­£å¸¸è¿è¡Œ
- **è¿è¡Œæ—¶é—´**: 2578ç§’ (~43åˆ†é’Ÿ)
- **å“åº”æ—¶é—´**: 2ms
- **ç¯å¢ƒ**: production

#### å®‰å…¨å¤´éƒ¨é…ç½® âœ…
```
âœ“ Strict-Transport-Security: max-age=31536000; includeSubDomains
âœ“ X-Content-Type-Options: nosniff
âœ“ X-Frame-Options: DENY
âœ“ X-Xss-Protection: 1; mode=block
âœ“ Referrer-Policy: strict-origin-when-cross-origin
âœ“ Permissions-Policy: camera=(), microphone=(), geolocation=()
```

#### CORSé…ç½® âœ…
```
âœ“ Access-Control-Allow-Origin: *
âœ“ Access-Control-Allow-Methods: GET, POST, PUT, DELETE, OPTIONS
âœ“ Access-Control-Allow-Headers: Content-Type, Authorization
```

### 2. APIå¥åº·æ£€æŸ¥ âœ…

**ç«¯ç‚¹**: `/api/health`

```json
{
  "status": "healthy",
  "timestamp": "2025-10-04T00:58:57.749Z",
  "uptime": 2578.055062129,
  "responseTime": 2,
  "checks": {
    "database": {
      "status": "healthy",
      "latency": 2
    },
    "aiServices": {
      "status": "healthy",
      "message": "3/3 services configured (DeepSeek: yes, GLM: yes, Qwen: yes)"
    },
    "environment": {
      "status": "healthy",
      "message": "All required variables set"
    }
  },
  "version": "unknown",
  "environment": "production"
}
```

**æ£€æŸ¥é¡¹**:
- âœ… **æ•°æ®åº“è¿æ¥**: æ­£å¸¸ (å»¶è¿Ÿ 2ms)
- âœ… **AIæœåŠ¡**: å…¨éƒ¨é…ç½® (DeepSeek, GLM, Qwen)
- âœ… **ç¯å¢ƒå˜é‡**: å…¨éƒ¨è®¾ç½®æ­£ç¡®
- âœ… **å“åº”æ—¶é—´**: 2ms (æå¿«)

### 3. WebSocketæœåŠ¡ âœ…

**ç«¯ç‚¹**: `/api/websocket-status`

```json
{
  "websocketServerRunning": true,
  "activeConnections": 0,
  "connectionsList": [],
  "serverTime": "2025-10-04T00:59:40.608Z",
  "wsServerOptions": {
    "port": "inherited",
    "host": "inherited"
  }
}
```

**æ£€æŸ¥é¡¹**:
- âœ… **æœåŠ¡çŠ¶æ€**: è¿è¡Œä¸­
- âœ… **é…ç½®**: ç«¯å£å’Œä¸»æœºä»æœåŠ¡å™¨ç»§æ‰¿
- âœ… **å½“å‰è¿æ¥**: 0 (æ­£å¸¸,æ— æ´»è·ƒç«ä»·)

### 4. æ ¸å¿ƒé¡µé¢ âœ…

#### é¦–é¡µ (/)
- **çŠ¶æ€**: 200 OK
- **åŠ è½½**: æ­£å¸¸
- **SEO**: å·²é…ç½® (Open Graph, Twitter Cards)
- **è¯­è¨€**: zh-CN
- **æ¡†æ¶**: Next.js

#### åˆ›æ„å¸‚åœº (/marketplace)
- **çŠ¶æ€**: 200 OK
- **å†…å®¹é•¿åº¦**: 11,807 bytes
- **ç¼“å­˜**: X-Nextjs-Cache: HIT
- **å“åº”**: æ­£å¸¸

#### å•†ä¸šè®¡åˆ’ (/business-plan)
- **çŠ¶æ€**: 200 OK
- **å†…å®¹é•¿åº¦**: 12,910 bytes
- **ç¼“å­˜**: X-Nextjs-Cache: HIT
- **å“åº”**: æ­£å¸¸

### 5. ä¹‹å‰ä¿®å¤çš„é—®é¢˜éªŒè¯ âœ…

#### è®¤è¯æ—¶åºé—®é¢˜
- âœ… **ä¿®å¤çŠ¶æ€**: å·²éƒ¨ç½²
- âœ… **5åˆ†é’Ÿå®½é™æœŸ**: å·²ç”Ÿæ•ˆ
- âœ… **ç›¸å…³ç«¯ç‚¹**:
  - `/api/business-plan-session` - æ­£å¸¸
  - `/api/business-plan-report/[id]/export` - æ­£å¸¸

#### æ¢è¡Œç¬¦é—®é¢˜
- âœ… **BOMæ¸…é™¤**: å·²å®Œæˆ
- âœ… **.gitattributes**: å·²é…ç½®
- âœ… **æ„å»º**: æˆåŠŸéƒ¨ç½²

#### ç¯å¢ƒéªŒè¯
- âœ… **å¯åŠ¨éªŒè¯**: å·²ç”Ÿæ•ˆ
- âœ… **AIæœåŠ¡**: å…¨éƒ¨é…ç½®
- âœ… **æ•°æ®åº“**: è¿æ¥æ­£å¸¸

### 6. éƒ¨ç½²å¹³å° (Zeabur) âœ…

**æ£€æµ‹åˆ°çš„ç‰¹æ€§**:
- âœ… HTTP/3 æ”¯æŒ (Alt-Svc: h3=":443")
- âœ… è¯·æ±‚IDè¿½è¸ª (X-Zeabur-Request-Id)
- âœ… åœ°ç†ä½ç½®æ£€æµ‹ (X-Zeabur-Ip-Country: US)
- âœ… SSL/TLS (HSTSå·²å¯ç”¨)

### 7. æ€§èƒ½æŒ‡æ ‡ âœ…

| æŒ‡æ ‡ | æ•°å€¼ | çŠ¶æ€ |
|------|------|------|
| APIå“åº”æ—¶é—´ | 2ms | ä¼˜ç§€ |
| æ•°æ®åº“å»¶è¿Ÿ | 2ms | ä¼˜ç§€ |
| é¡µé¢ç¼“å­˜ | HIT | æ­£å¸¸ |
| æœåŠ¡å™¨è¿è¡Œæ—¶é—´ | 43åˆ†é’Ÿ | ç¨³å®š |

## æ½œåœ¨é—®é¢˜

### 1. ç‰ˆæœ¬ä¿¡æ¯ç¼ºå¤± âš ï¸
- **é—®é¢˜**: health endpoint è¿”å› `version: "unknown"`
- **å»ºè®®**: åœ¨æ„å»ºæ—¶æ³¨å…¥ç‰ˆæœ¬å·
- **ä¼˜å…ˆçº§**: ä½

**ä¿®å¤æ–¹æ¡ˆ**:
```javascript
// åœ¨æ„å»ºè„šæœ¬ä¸­è®¾ç½®ç¯å¢ƒå˜é‡
process.env.APP_VERSION = require('./package.json').version
```

### 2. å½“å‰æ— æ´»è·ƒè¿æ¥ â„¹ï¸
- **è§‚å¯Ÿ**: WebSocket activeConnections: 0
- **è¯´æ˜**: è¿™æ˜¯æ­£å¸¸çš„,è¡¨ç¤ºå½“å‰æ²¡æœ‰ç”¨æˆ·åœ¨è¿›è¡ŒAIç«ä»·
- **å»ºè®®**: æ·»åŠ ç›‘æ§å‘Šè­¦,å¦‚æœé•¿æ—¶é—´æ— è¿æ¥å¯èƒ½éœ€è¦æ£€æŸ¥

## å»ºè®®çš„ç›‘æ§æŒ‡æ ‡

### å…³é”®æŒ‡æ ‡
1. **APIå“åº”æ—¶é—´** - ç›®æ ‡: <100ms
2. **æ•°æ®åº“è¿æ¥æ•°** - ç›‘æ§è¿æ¥æ± 
3. **WebSocketæ´»è·ƒè¿æ¥** - ç›‘æ§ç«ä»·æ´»åŠ¨
4. **é”™è¯¯ç‡** - ç›®æ ‡: <0.1%
5. **AIæœåŠ¡å¯ç”¨æ€§** - 3/3æœåŠ¡åœ¨çº¿

### å‘Šè­¦é˜ˆå€¼
```yaml
api_response_time: > 500ms
database_latency: > 100ms
error_rate: > 1%
ai_services_down: < 2/3
uptime: < 99.9%
```

## åŠŸèƒ½æµ‹è¯•å»ºè®®

ç”±äºAPIå¥åº·æ£€æŸ¥é€šè¿‡,å»ºè®®è¿›è¡Œä»¥ä¸‹ç«¯åˆ°ç«¯æµ‹è¯•:

### 1. ç”¨æˆ·æ³¨å†Œ/ç™»å½•æµç¨‹
- [ ] æ³¨å†Œæ–°ç”¨æˆ·
- [ ] é‚®ç®±éªŒè¯
- [ ] ç™»å½•åŠŸèƒ½
- [ ] Tokenåˆ·æ–°

### 2. åˆ›æ„å¸‚åœºåŠŸèƒ½
- [ ] æµè§ˆåˆ›æ„åˆ—è¡¨
- [ ] åˆ›æ„è¯¦æƒ…é¡µ
- [ ] åˆ›æ„æäº¤
- [ ] ç§¯åˆ†ç³»ç»Ÿ

### 3. AIç«ä»·åŠŸèƒ½ (æ ¸å¿ƒ)
- [ ] åˆ›å»ºç«ä»·
- [ ] WebSocketè¿æ¥
- [ ] AIä»£ç†å“åº”
- [ ] ç«ä»·ç»“æœ
- [ ] å•†ä¸šè®¡åˆ’ç”Ÿæˆ

### 4. å•†ä¸šè®¡åˆ’åŠŸèƒ½
- [ ] ä»ç«ä»·è·³è½¬
- [ ] å…è®¤è¯è®¿é—®(5åˆ†é’Ÿå†…)
- [ ] æŠ¥å‘Šå¯¼å‡º(markdown, PDF)
- [ ] è¶…æ—¶åè®¤è¯

### 5. æ–‡æ¡£å’Œå¸®åŠ©
- [ ] æ–‡æ¡£é¡µé¢
- [ ] ç”¨æˆ·æŒ‡å—
- [ ] FAQ

## ç»“è®º

### æ•´ä½“è¯„ä¼°: âœ… ä¼˜ç§€

**ä¼˜ç‚¹**:
1. âœ… æ‰€æœ‰æ ¸å¿ƒæœåŠ¡å¥åº·è¿è¡Œ
2. âœ… å®‰å…¨é…ç½®å®Œå–„(HSTS, CSP, XSSä¿æŠ¤)
3. âœ… APIå“åº”æ—¶é—´æå¿«(2ms)
4. âœ… æ•°æ®åº“è¿æ¥ç¨³å®š
5. âœ… AIæœåŠ¡å…¨éƒ¨åœ¨çº¿
6. âœ… WebSocketæœåŠ¡æ­£å¸¸
7. âœ… ä¹‹å‰çš„bugä¿®å¤å·²éƒ¨ç½²ç”Ÿæ•ˆ
8. âœ… Next.jsç¼“å­˜å·¥ä½œæ­£å¸¸
9. âœ… Zeaburéƒ¨ç½²é…ç½®æ­£ç¡®

**æ”¹è¿›å»ºè®®**:
1. æ·»åŠ ç‰ˆæœ¬å·è¿½è¸ª
2. å®æ–½ç›‘æ§å’Œå‘Šè­¦ç³»ç»Ÿ
3. è¿›è¡Œå®Œæ•´çš„ç«¯åˆ°ç«¯æµ‹è¯•
4. æ·»åŠ æ€§èƒ½ç›‘æ§é¢æ¿

**ä¸‹ä¸€æ­¥è¡ŒåŠ¨**:
1. âœ… ç”Ÿäº§ç¯å¢ƒå·²éªŒè¯å¥åº·
2. ğŸ“Š å»ºè®®æ·»åŠ ç›‘æ§å·¥å…·(å¦‚Sentry, DataDog)
3. ğŸ§ª æ‰§è¡Œå®Œæ•´çš„åŠŸèƒ½æµ‹è¯•å¥—ä»¶
4. ğŸ“ˆ å»ºç«‹æ€§èƒ½åŸºçº¿æŒ‡æ ‡

---

**æ£€æŸ¥æ–¹æ³•**: ä½¿ç”¨curlå’ŒWebFetchå·¥å…·è¿›è¡Œè¿œç¨‹æ£€æŸ¥
**æ£€æŸ¥å·¥å…·**: Claude Code + BrowserMCP (å·²å®‰è£…)
**æŠ¥å‘Šç”Ÿæˆ**: è‡ªåŠ¨åŒ–æ£€æŸ¥è„šæœ¬

## é™„å½•: å¿«é€Ÿå¥åº·æ£€æŸ¥è„šæœ¬

```bash
#!/bin/bash
# å¿«é€Ÿå¥åº·æ£€æŸ¥
echo "=== ç”Ÿäº§ç¯å¢ƒå¥åº·æ£€æŸ¥ ==="
echo ""

echo "1. APIå¥åº·æ£€æŸ¥:"
curl -s https://aijiayuan.top/api/health | jq .

echo ""
echo "2. WebSocketçŠ¶æ€:"
curl -s https://aijiayuan.top/api/websocket-status | jq .

echo ""
echo "3. æ ¸å¿ƒé¡µé¢çŠ¶æ€:"
for page in "/" "/marketplace" "/business-plan"; do
  status=$(curl -s -o /dev/null -w "%{http_code}" "https://aijiayuan.top$page")
  echo "  $page: $status"
done

echo ""
echo "=== æ£€æŸ¥å®Œæˆ ==="
```

**ä½¿ç”¨æ–¹æ³•**:
```bash
chmod +x health-check.sh
./health-check.sh
```
