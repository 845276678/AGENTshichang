# 商业计划书生成系统 - 用户需求收集功能

## 🎯 功能概述

为了生成最符合用户期望的商业计划书，我们在原有系统基础上增加了智能化的用户需求收集和AI分析功能。用户现在可以通过简单的交互指定自己最关心的内容，系统会自动调整生成策略。

## 🚀 新增功能特性

### 1. 智能需求收集
- **5个维度问卷**：商业关注重点、目标受众、行业特色、资源约束、时间优先级
- **预设 + 自定义**：提供常见选项的同时支持完全自定义需求
- **优先级调节**：可调整不同需求的重要性权重
- **渐进式引导**：步骤化收集，避免信息过载

### 2. AI智能分析
- **需求理解**：自动分析用户的核心关注点和背景
- **匹配度评估**：评估创意与需求的契合程度
- **个性化大纲**：根据需求调整章节重点和内容深度
- **优化建议**：提供针对性的改进建议

### 3. 定制化生成策略
- **动态调整权重**：根据用户需求调整各阶段的生成比重
- **受众适配**：针对不同目标受众调整语言风格和内容重点
- **深度控制**：自动决定每个章节的详细程度

## 📋 使用流程

### 第一步：创意提交
```typescript
const ideaData = {
  id: 'idea-001',
  title: 'AI智能学习助手',
  description: '基于大语言模型的个性化学习辅导系统...',
  category: '教育科技',
  tags: ['AI', '教育', 'SaaS'],
  submittedBy: 'user@example.com'
}
```

### 第二步：需求收集（新增）
用户通过5个维度的问卷指定需求：

```typescript
const userRequirements = {
  selectedOptions: {
    'business_focus': ['market_opportunity', 'technology_innovation'],
    'target_audience': ['investors_vc'],
    'resource_constraints': ['funding_limited'],
    // ...其他维度
  },
  customRequirements: {
    'business_focus': '特别希望强调AI技术的差异化优势...'
  },
  additionalContext: '这是我的第二个创业项目，希望重点展示商业模式的可扩展性'
}
```

### 第三步：AI需求分析（新增）
```typescript
const analysis = await analyzeRequirements(ideaData, userRequirements)

// 分析结果包含：
// - 用户画像和核心关注点
// - 创意需求匹配度评估
// - 个性化章节大纲
// - 生成策略调整建议
```

### 第四步：定制化生成
基于分析结果，系统自动：
- 调整各章节的内容深度和页数分配
- 应用针对目标受众的语言风格
- 重点突出用户关心的商业要素

## 🎨 界面组件结构

```
BusinessPlanWorkflow (新增主入口)
├── UserRequirementsCollector (需求收集)
│   ├── RequirementCategoryStep (分类问卷)
│   ├── RequirementsAnalysisStep (AI分析)
│   └── AnalysisResultsStep (结果展示)
└── BusinessPlanGenerationWorkspace (生成工作区)
    ├── BusinessPlanProgressTracker (进度跟踪)
    └── ... (其他原有组件)
```

## 📊 需求分类详解

### 1. 商业关注重点
- **市场机会分析**：深度分析市场规模、增长趋势
- **竞争优势构建**：详细阐述核心竞争力
- **盈利模式设计**：清晰的收入来源规划
- **技术创新亮点**：突出技术方案先进性
- **团队能力展示**：突出专业能力和执行力
- **可扩展性潜力**：展现成长空间

### 2. 目标受众
- **风险投资人**：强调ROI和可扩展性
- **天使投资人**：注重创新性和早期验证
- **战略合作伙伴**：展示合作价值
- **内部团队**：详细执行计划
- **政府机构**：社会价值和合规性

### 3. 行业特色
- **合规性要求**：法律法规遵循
- **行业趋势分析**：发展方向和趋势
- **生态位定位**：产业链价值
- **数字化转型**：数字化创新价值

### 4. 资源约束
- **资金有限**：资金使用计划和融资策略
- **团队组建**：人才需求和建设计划
- **技术差距**：技术开发路径
- **市场准入**：市场拓展策略

### 5. 时间优先级
- **立即启动（3-6个月）**：快速启动和验证
- **中期发展（1-2年）**：平衡发展规划
- **长期愿景（3-5年）**：战略规划和规模化

## 💡 AI分析能力

### 需求理解分析
```typescript
interface RequirementUnderstanding {
  coreInterests: string[]        // 核心关注点识别
  userProfile: string           // 用户画像分析
  experienceLevel: string       // 经验水平判断
  mainConcerns: string[]        // 主要关切识别
}
```

### 匹配度评估
```typescript
interface IdeaFitAnalysis {
  matchScore: number            // 0-1匹配分数
  strengths: string[]          // 匹配优势
  challenges: string[]         // 潜在挑战
  recommendations: string[]    // 优化建议
}
```

### 个性化大纲生成
```typescript
interface CustomizedOutline {
  sections: Array<{
    stageId: string
    title: string
    priority: 'high' | 'medium' | 'low'  // 根据需求调整
    estimatedPages: number               // 动态计算页数
    focusPoints: string[]               // 重点内容
  }>
  totalPages: number
  estimatedTime: number
}
```

## 🔧 技术实现

### 状态管理扩展
```typescript
interface BusinessPlanGenerationState {
  // ... 原有状态 ...

  // 新增需求收集状态
  requirementsCollection: {
    isActive: boolean
    currentStep: number
    userRequirements: UserRequirements | null
    analysisResult: RequirementAnalysis | null
    isAnalyzing: boolean
  }

  // 新增方法
  startRequirementsCollection: () => void
  analyzeRequirements: () => Promise<RequirementAnalysis>
  applyRequirementsAnalysis: (requirements, analysis) => void
}
```

### AI分析引擎
```typescript
class RequirementAnalysisEngine {
  async analyzeUserRequirements(
    ideaData: IdeaData,
    userRequirements: UserRequirements
  ): Promise<RequirementAnalysis> {
    // 1. 需求理解和分类
    const understanding = await this.understandRequirements(requirements)

    // 2. 创意匹配分析
    const ideaFit = await this.analyzeIdeaRequirementFit(ideaData, understanding)

    // 3. 个性化大纲生成
    const outline = await this.generateCustomizedOutline(ideaData, requirements)

    // 4. 优化建议生成
    const suggestions = await this.generateOptimizationSuggestions(requirements)

    return { understanding, ideaFit, outline, suggestions }
  }
}
```

## 📈 用户体验提升

### 1. 渐进式引导
- 分步骤收集，避免信息过载
- 实时进度显示
- 可随时返回修改

### 2. 智能推荐
- 基于创意类型推荐相关选项
- 根据已选择内容智能建议
- 历史偏好学习

### 3. 可视化反馈
- 实时分析进度展示
- 匹配度可视化
- 个性化大纲预览

### 4. 灵活控制
- 可跳过需求收集，使用默认设置
- 可在生成过程中调整需求
- 支持保存需求模板

## 🎯 实际使用示例

### 场景1：技术创业者面向VC
```typescript
// 用户选择：技术创新 + 市场机会 + VC投资人
// AI自动调整：
// - 技术架构章节：详细程度提升到comprehensive
// - 市场研究章节：增加4页，重点分析规模化潜力
// - 财务模型：采用投资人视角，强调ROI
// - 投资推介：提升为高优先级，增加3页
```

### 场景2：资源有限的初创团队
```typescript
// 用户选择：资金有限 + 团队组建 + 内部团队受众
// AI自动调整：
// - 财务模型：重点关注资金使用效率
// - 实施计划：详细的团队建设和资源配置
// - 语言风格：更偏向操作指南风格
// - 风险评估：增加资源风险分析
```

## 🔄 集成方式

### 在现有页面中使用：
```tsx
import { BusinessPlanWorkflow } from '@/components/business-plan/BusinessPlanWorkflow'

export default function BusinessPlanPage() {
  const handleComplete = (finalPlan) => {
    console.log('生成完成:', finalPlan)
  }

  return (
    <BusinessPlanWorkflow
      ideaData={ideaData}
      onComplete={handleComplete}
      onSave={handleSaveDraft}
    />
  )
}
```

## 📝 总结

这个增强功能让商业计划书生成系统从"一刀切"升级为"千人千面"，真正做到：

1. **个性化定制**：根据用户具体需求调整内容
2. **智能化分析**：AI理解并优化用户期望
3. **专业化输出**：针对不同受众生成专业内容
4. **用户友好**：简单交互，复杂智能

用户不再需要担心生成的计划书不符合自己的期望，系统会自动确保输出内容精准匹配需求。