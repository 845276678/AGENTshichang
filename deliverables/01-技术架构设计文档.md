# 老年人智能陪护机器人 - 技术架构设计文档

## 第1页 - 系统总体架构

### 1.1 核心硬件平台
**主控制器**: NVIDIA Jetson AGX Orin (32GB)
- ARM Cortex-A78AE CPU (12核)
- NVIDIA Ampere GPU (2048 CUDA核心)
- 内存: 32GB LPDDR5
- 存储: 64GB eUFS + 1TB NVMe SSD

**传感器模块**:
- 高清摄像头: 4K@30fps，支持夜视
- 麦克风阵列: 7麦克风环形阵列，支持360°声源定位
- 激光雷达: Livox Avia，测距范围450m
- IMU: 9轴惯性测量单元
- 环境传感器: 温湿度、空气质量、光照

### 1.2 软件架构
```
┌─────────────────────┐
│    应用层           │  健康监护、情感陪伴、紧急救助
├─────────────────────┤
│    中间件层         │  ROS2 Humble、OpenCV、TensorFlow
├─────────────────────┤
│    操作系统层       │  Ubuntu 22.04 LTS ARM64
├─────────────────────┤
│    硬件抽象层       │  设备驱动、传感器接口
└─────────────────────┘
```

### 1.3 通信架构
- **本地通信**: CAN总线连接传感器和执行器
- **无线通信**: WiFi 6 (主) + 5G (备) + 蓝牙5.2
- **云端通信**: MQTT协议，TLS 1.3加密
- **家庭互联**: 支持HomeKit、小米米家、华为HiLink

---

## 第2页 - AI语音交互系统

### 2.1 语音识别引擎
**技术选型**: 科大讯飞AIUI 3.0 + 本地Whisper模型
- **识别准确率**: 标准普通话95%+，方言90%+
- **响应时间**: 唤醒响应<500ms，识别结果<1s
- **降噪算法**: 自适应波束成形 + RNN降噪
- **方言支持**: 粤语、吴语、闽南语、客家话

### 2.2 自然语言理解
**模型架构**: 基于LLaMA2-7B微调的老年对话模型
- **训练数据**: 10万+老年人对话语料，涵盖健康、生活、情感话题
- **推理优化**: TensorRT量化，延迟<2s，内存占用<8GB
- **上下文管理**: 最多保持10轮对话记忆

```python
# 语音交互核心流程
class VoiceInteraction:
    def process_audio(self, audio_stream):
        # 1. 语音活动检测
        vad_result = self.vad_detector.detect(audio_stream)

        # 2. 语音识别
        text = self.asr_engine.recognize(vad_result.audio)

        # 3. 意图理解
        intent = self.nlu_model.understand(text, self.context)

        # 4. 对话生成
        response = self.dialogue_model.generate(intent)

        # 5. 语音合成
        audio = self.tts_engine.synthesize(response)

        return audio
```

### 2.3 情感化语音合成
- **基础模型**: VITS多说话人模型
- **情感维度**: 开心、关爱、担心、鼓励四种基调
- **音色设计**: 温和女声，语速可调（慢20%适应老年人）
- **个性化**: 可学习老人姓名、称呼习惯

---

## 第3页 - 健康监测模块

### 3.1 非接触式生理监测
**心率检测技术**: rPPG (远程光电容积脉搏波)
- **实现原理**: 通过摄像头检测面部微小颜色变化
- **准确率**: 与医用设备相比误差<±5%
- **检测范围**: 0.5-2米距离，环境光照>50lux
- **算法**: DeepPhys CNN网络 + 卡尔曼滤波

**体温监测**: 红外热成像 + AI算法
- **传感器**: FLIR Lepton 3.5微型热像仪
- **精度**: ±0.3°C，符合医疗器械II类标准
- **检测区域**: 额头、眼部温度，自动选择最准确区域

### 3.2 行为模式分析
**跌倒检测算法**:
```python
class FallDetection:
    def __init__(self):
        self.pose_model = YOLOv8-pose()
        self.action_classifier = LSTM_ActionNet()

    def detect_fall(self, video_frame):
        # 1. 人体姿态估计
        keypoints = self.pose_model.detect(video_frame)

        # 2. 计算身体倾斜角度
        body_angle = self.calculate_body_angle(keypoints)

        # 3. 分析运动轨迹
        trajectory = self.track_trajectory(keypoints)

        # 4. 综合判断
        fall_prob = self.action_classifier.predict([body_angle, trajectory])

        return fall_prob > 0.85  # 85%置信度阈值
```

**异常行为识别**:
- 长时间静止不动 (>2小时)
- 频繁起夜 (>3次/夜)
- 步态异常 (步频、步幅变化)
- 坐姿不当 (长时间弯腰驼背)

### 3.3 用药管理系统
**药盒识别**: 基于YOLOv8的目标检测
- **识别种类**: 常见药盒、药瓶200+种
- **OCR文字识别**: 药品名称、用法用量自动读取
- **服药提醒**: 多模态提醒（语音+屏幕+灯光）

---

## 第4页 - 情感陪护系统

### 4.1 情绪识别技术
**面部表情分析**: FER2013数据集训练的CNN模型
- **情绪类别**: 开心、悲伤、愤怒、恐惧、惊讶、厌恶、平静
- **识别精度**: 在老年人数据集上达到82%准确率
- **实时性**: 30fps处理速度，延迟<100ms

**语音情感识别**: 基于Wav2Vec2的情感分类器
- **特征提取**: 声学特征(MFCC) + 语言特征(BERT嵌入)
- **情感维度**: 效价(愉悦度)、激活度(兴奋程度)
- **准确率**: 70%+ (考虑老年人语音特点)

### 4.2 个性化陪伴策略
**记忆系统设计**:
```python
class PersonalMemory:
    def __init__(self):
        self.basic_info = {}  # 姓名、年龄、家庭成员
        self.preferences = {}  # 兴趣爱好、禁忌话题
        self.health_profile = {}  # 健康状况、用药信息
        self.interaction_history = []  # 对话历史

    def update_preference(self, interaction):
        # 从对话中学习老人偏好
        if "喜欢" in interaction.text:
            preference = self.extract_preference(interaction.text)
            self.preferences[preference.category] = preference.value
```

**陪伴内容库**:
- 老歌库: 1950-1990年代经典歌曲2000+首
- 戏曲库: 京剧、豫剧、越剧经典选段500+段
- 故事库: 历史故事、民间传说、笑话1000+篇
- 健康知识: 养生保健、疾病预防科普文章

---

## 第5页 - 云端服务架构

### 5.1 微服务架构设计
```
┌──────────────────┐    ┌──────────────────┐    ┌──────────────────┐
│  用户管理服务    │    │  设备管理服务    │    │  健康数据服务    │
│  User Service    │    │  Device Service  │    │  Health Service  │
└──────────────────┘    └──────────────────┘    └──────────────────┘
         │                        │                        │
         └────────────────────────┼────────────────────────┘
                                  │
                    ┌──────────────────┐
                    │   API网关        │
                    │   Kong Gateway   │
                    └──────────────────┘
                              │
                    ┌──────────────────┐
                    │   消息队列       │
                    │   Apache Kafka   │
                    └──────────────────┘
```

### 5.2 数据存储架构
**时序数据库**: InfluxDB 2.0
- 存储健康监测数据 (心率、体温、活动量)
- 数据保留策略: 原始数据30天，聚合数据2年
- 查询性能: 支持实时和历史数据分析

**关系数据库**: PostgreSQL 14
- 用户信息、设备信息、配置数据
- 主从架构，读写分离
- 数据备份: 每日全量 + 实时增量

**对象存储**: 阿里云OSS
- 语音录音、照片、视频文件
- CDN加速，全球分发
- 数据加密: AES-256

### 5.3 安全与隐私保护
**数据加密**:
- 传输加密: TLS 1.3 + 证书绑定
- 存储加密: AES-256-GCM
- 端到端加密: 敏感数据本地处理

**隐私合规**:
- 符合《个人信息保护法》要求
- 数据最小化原则，用户可删除所有数据
- 第三方API调用数据脱敏处理

**安全监控**:
- 设备异常行为检测
- API调用频率监控
- 数据泄露预警机制