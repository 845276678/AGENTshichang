# 前端集成测试指南 - 创意成熟度评估

## 测试目标
验证创意成熟度评估组件在竞价结束页面的集成是否正常工作

---

## 测试环境

**URL**: `http://localhost:4000`
**浏览器**: Chrome/Firefox/Safari
**测试账号**: 无需登录（使用sessionId）

---

## 测试步骤

### 1. 启动开发服务器
```bash
cd D:\ai\AIagentshichang
npm run dev
```

等待服务器启动: `http://localhost:4000`

### 2. 访问竞价页面

**方式1: 创建新创意**
1. 打开首页: `http://localhost:4000`
2. 点击"开始竞价"
3. 输入测试创意:
   ```
   创意名称: AI智能错题本
   创意描述: 一个帮助高中生整理错题的智能应用，
   支持OCR识别手写错题，自动分类整理，
   智能推荐相似题目练习。基础版免费，
   高级版99元/年。目标用户是准备高考的高三学生。
   ```
4. 提交创意

**方式2: 直接访问竞价页面（如果已有ideaId）**
```
http://localhost:4000/bidding?ideaId=test-idea-001&sessionId=test-session-001
```

### 3. 观察竞价流程

**阶段1: AGENT_WARMUP（热身）**
- ✅ 显示"AI专家在线"
- ✅ 连接状态为"connected"
- ✅ 观众数显示

**阶段2: AGENT_DISCUSSION（讨论）**
- ✅ 5个AI专家开始发言
- ✅ 专家头像和消息显示
- ✅ 消息实时更新

**阶段3: AGENT_BIDDING（竞价）**
- ✅ 专家开始出价
- ✅ 最高出价显示在右上角
- ✅ 出价动画效果

**阶段4: USER_SUPPLEMENT（用户补充）**
- ✅ 显示补充创意面板
- ✅ 用户可以补充描述（最多3次）
- ✅ 补充历史记录显示

**阶段5: RESULT_DISPLAY（结果展示）** ⭐ **重点测试**
- ✅ 显示"AI竞价完成！"
- ✅ 竞价结果摘要卡片
- ✅ **自动触发评估**（等待2-3秒）
- ✅ 显示"正在分析创意成熟度..."加载动画
- ✅ 评估完成后显示评分卡

### 4. 验证评估组件

#### 4.1 MaturityScoreCard（评分卡）
**检查项**:
- [ ] 总分显示（1.0-10.0范围）
- [ ] 成熟度等级显示（LOW/GRAY_LOW/MEDIUM/GRAY_HIGH/HIGH）
- [ ] 置信度百分比显示
- [ ] 5个维度条形图显示:
  - 目标客户 (targetCustomer)
  - 需求场景 (demandScenario)
  - 核心价值 (coreValue)
  - 商业模式 (businessModel)
  - 可信度 (credibility)
- [ ] 每个维度的分数和状态标签
- [ ] The Mom Test信号统计:
  - 有效信号数量
  - 无效信号数量

**预期结果**:
```
总分: 5.7 / 10.0
等级: MEDIUM （中等成熟度）
置信度: 98%

维度详情:
- 目标客户: 5.2/10 (需要聚焦)
- 需求场景: 6.0/10 (需要聚焦)
- 核心价值: 4.2/10 (不清晰)
- 商业模式: 5.7/10 (需要聚焦)
- 可信度: 8.6/10 (清晰)

The Mom Test信号:
- 有效信号: 4个（具体过去:2, 真实付费:1, 证据:1）
- 无效信号: 1个（赞美:1）
```

#### 4.2 WorkshopRecommendations（工作坊推荐）
**显示条件**: 总分 ≥ 5.0

**检查项**:
- [ ] 显示"解锁专业工作坊"标题
- [ ] 推荐卡片列表（1-3个工作坊）
- [ ] 每个卡片包含:
  - 工作坊图标
  - 工作坊名称
  - 推荐等级（1-5星）
  - 优先级标签（高/中/低）
  - 推荐原因
  - 预计时长
  - 薄弱维度标签
  - "开始工作坊"按钮

**预期推荐**:
```
1. ⭐⭐⭐⭐⭐ 需求验证实验室
   - 优先级: 高
   - 原因: 目标客户维度需要深化验证
   - 时长: 60-90分钟
   - 薄弱维度: 目标客户、核心价值

2. ⭐⭐⭐⭐⭐ 盈利模式实验室
   - 优先级: 高
   - 原因: 商业模式维度需要优化
   - 时长: 45-60分钟
   - 薄弱维度: 商业模式
```

**交互测试**:
- [ ] 点击"开始工作坊"按钮
- [ ] 控制台输出: `🎓 用户选择工作坊: demand-validation`
- [ ] 暂不跳转（TODO功能）

#### 4.3 ImprovementSuggestions（改进建议）
**显示条件**: 总分 < 8.0

**检查项**:
- [ ] 显示"改进建议"标题
- [ ] 建议列表（3-5条）
- [ ] 每条建议包含:
  - 优先级图标
  - 改进内容描述
  - 预计提升分数
  - 对应维度标签

**预期建议**:
```
1. 🔴 高优先级
   - 明确核心价值主张，说明与竞品的差异化优势
   - 预计提升: +1.5分
   - 维度: 核心价值

2. 🟡 中优先级
   - 细化目标用户画像，从"高三学生"到具体学科和成绩区间
   - 预计提升: +0.8分
   - 维度: 目标客户

3. 🟡 中优先级
   - 验证定价策略，通过用户访谈确认付费意愿
   - 预计提升: +0.6分
   - 维度: 商业模式
```

**The Mom Test警告**:
- [ ] 如果有无效信号，显示警告提示
- [ ] 例如: "⚠️ 检测到1个赞美类信号，建议获取更多具体行为证据"

#### 4.4 操作按钮
**检查项**:
- [ ] "生成商业计划书"按钮可点击
- [ ] "查看详细报告"按钮可点击
- [ ] 按钮点击后跳转到对应页面

---

## 错误场景测试

### 场景1: API调用失败
**模拟方法**: 关闭API服务器或修改API端点为错误URL

**预期行为**:
- [ ] 显示加载动画3-5秒
- [ ] 显示红色错误卡片: "评估失败: 评估失败: 500"
- [ ] 用户仍可点击"生成商业计划书"按钮
- [ ] 不阻断用户流程

### 场景2: 无AI消息数据
**模拟方法**: 在 `RESULT_DISPLAY` 阶段前清空 aiMessages

**预期行为**:
- [ ] 不触发评估
- [ ] 不显示加载动画
- [ ] 直接显示竞价结果和操作按钮

### 场景3: 无竞价数据
**模拟方法**: currentBids 为空对象

**预期行为**:
- [ ] 不触发评估
- [ ] 显示竞价摘要（出价为0）
- [ ] 操作按钮可用

### 场景4: 网络延迟
**模拟方法**: 使用浏览器DevTools限制网络速度为"Slow 3G"

**预期行为**:
- [ ] 显示加载动画持续时间延长
- [ ] 最终正常显示评估结果
- [ ] 无白屏或卡顿

---

## 性能测试

### 测试工具
使用Chrome DevTools Performance面板

### 测试指标

1. **评估触发延迟**
   - 目标: < 100ms
   - 测量: 进入 RESULT_DISPLAY 到 API调用开始
   - 实际: ____ms

2. **API响应时间**
   - 目标: < 500ms
   - 测量: API调用开始到返回结果
   - 实际: ____ms

3. **组件渲染时间**
   - 目标: < 200ms
   - 测量: 获取数据到组件完全渲染
   - 实际: ____ms

4. **总耗时**
   - 目标: < 1000ms
   - 测量: 进入 RESULT_DISPLAY 到评估结果显示
   - 实际: ____ms

---

## 浏览器兼容性测试

### 桌面浏览器
- [ ] Chrome 120+ ✅
- [ ] Firefox 120+ ✅
- [ ] Safari 17+ ✅
- [ ] Edge 120+ ✅

### 移动浏览器
- [ ] iOS Safari 17+ ✅
- [ ] Android Chrome 120+ ✅

### 测试项
- [ ] 组件正常渲染
- [ ] 动画流畅
- [ ] 按钮可点击
- [ ] 响应式布局正常

---

## 控制台日志验证

打开浏览器控制台（F12），查看日志输出：

### 正常流程日志
```
🎯 触发创意成熟度评估...
✅ 创意成熟度评估完成: { totalScore: 5.7, level: 'MEDIUM', ... }
```

### 错误流程日志
```
🎯 触发创意成熟度评估...
❌ 创意成熟度评估失败: Error: 评估失败: 500
```

---

## 测试记录表

| 测试项 | 预期结果 | 实际结果 | 状态 | 备注 |
|--------|---------|---------|------|------|
| 评估自动触发 | 进入RESULT_DISPLAY后自动触发 | | ⏳ | |
| 加载动画显示 | 显示"正在分析..."文字和旋转图标 | | ⏳ | |
| MaturityScoreCard渲染 | 显示总分、5维度、等级 | | ⏳ | |
| WorkshopRecommendations渲染 | 分数≥5.0时显示 | | ⏳ | |
| ImprovementSuggestions渲染 | 分数<8.0时显示 | | ⏳ | |
| 错误处理 | API失败时显示错误卡片 | | ⏳ | |
| 工作坊按钮点击 | 控制台输出工作坊ID | | ⏳ | |
| 商业计划书按钮 | 跳转到生成页面 | | ⏳ | |
| 响应时间 | API响应<500ms | | ⏳ | |
| 浏览器兼容性 | Chrome/Firefox/Safari正常 | | ⏳ | |

---

## 问题报告模板

如果发现问题，请填写以下信息：

```markdown
### 问题标题
[简短描述问题]

### 重现步骤
1. 打开 http://localhost:4000
2. 进入竞价页面
3. 等待进入 RESULT_DISPLAY 阶段
4. [具体操作]

### 预期行为
[描述预期应该发生什么]

### 实际行为
[描述实际发生了什么]

### 截图/视频
[如果有，粘贴截图或视频链接]

### 环境信息
- 浏览器: Chrome 120.0.6099.109
- 操作系统: Windows 11
- Node版本: v24.6.0
- Next.js版本: 14.2.33

### 控制台日志
```
[粘贴相关的控制台日志]
```

### 严重程度
- [ ] 阻断性（无法继续使用）
- [ ] 严重（影响核心功能）
- [ ] 一般（影响次要功能）
- [ ] 轻微（视觉问题）
```

---

## 测试签署

**测试人员**: _______________
**测试日期**: _______________
**测试结果**: [ ] 通过 [ ] 不通过 [ ] 部分通过
**备注**: _______________________________________________

---

**文档版本**: v1.0
**最后更新**: 2025-01-15
